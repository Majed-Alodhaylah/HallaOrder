{% extends "home/base.html" %}
{% load static %}

{% block title %}الإعدادات{% endblock title %}

{% block dashboard_content %}
<div class="row p-4 g-4">
  <div class="col-12">
    <div class="card" style="border-radius:1rem;">
      <div class="card-body d-flex justify-content-between align-items-center">
        <div>
          <h4 class="mb-1">مركز التحكم والإعدادات</h4>
          <div class="text-muted">قم بإدارة إعدادات مطعمك من مكان واحد</div>
        </div>
        <div class="rounded-circle d-inline-flex align-items-center justify-content-center" style="width:60px;height:60px;background:#e6f6f7;color:#00AAB0">
          <i class="fa-solid fa-gear fs-3"></i>
        </div>
      </div>
    </div>
  </div>

  <div class="col-12">
    <div class="settings-grid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px;">

      <a class="setting-card" style="text-decoration:none;background:#fff;border-radius:16px;padding:24px;text-align:center;border:1px solid #e9ecef;box-shadow:0 4px 15px rgba(0,0,0,0.05);cursor:pointer;display:block;" data-bs-toggle="modal" data-bs-target="#restaurantInfoModal">
        <div class="icon" style="font-size:32px;color:#00AAB0;margin-bottom:12px;width:70px;height:70px;line-height:70px;border-radius:50%;background-color:#e6f6f7;display:inline-block;">
          <i class="fa-solid fa-store"></i>
        </div>
        <h5 style="font-weight:700;margin-bottom:6px;color:#004B59;">معلومات المطعم</h5>
        <p style="font-size:14px;color:#6c757d;margin:0;">تعديل الاسم، الوصف، والشعار</p>
      </a>

      <a class="setting-card" style="text-decoration:none;background:#fff;border-radius:16px;padding:24px;text-align:center;border:1px solid #e9ecef;box-shadow:0 4px 15px rgba(0,0,0,0.05);cursor:pointer;display:block;" href="{% url 'websites:public' request.user.restaurants.id %}">
        <div class="icon" style="font-size:32px;color:#00AAB0;margin-bottom:12px;width:70px;height:70px;line-height:70px;border-radius:50%;background-color:#e6f6f7;display:inline-block;">
          <i class="fa-solid fa-palette"></i>
        </div>
        <h5 style="font-weight:700;margin-bottom:6px;color:#004B59;">تصميم القائمة الإلكترونية</h5>
        <p style="font-size:14px;color:#6c757d;margin:0;">تخصيص الألوان والخطوط والهوية</p>
      </a>

      <a class="setting-card" style="text-decoration:none;background:#fff;border-radius:16px;padding:24px;text-align:center;border:1px solid #e9ecef;box-shadow:0 4px 15px rgba(0,0,0,0.05);cursor:pointer;display:block;" data-bs-toggle="modal" data-bs-target="#paymentModal">
        <div class="icon" style="font-size:32px;color:#00AAB0;margin-bottom:12px;width:70px;height:70px;line-height:70px;border-radius:50%;background-color:#e6f6f7;display:inline-block;">
          <i class="fa-solid fa-credit-card"></i>
        </div>
        <h5 style="font-weight:700;margin-bottom:6px;color:#004B59;">إعدادات الدفع</h5>
        <p style="font-size:14px;color:#6c757d;margin:0;">اضف معلومات البنك الخاصه بك لتحويل المبالغ</p>
      </a>

      <a class="setting-card" style="text-decoration:none;background:#fff;border-radius:16px;padding:24px;text-align:center;border:1px solid #e9ecef;box-shadow:0 4px 15px rgba(0,0,0,0.05);cursor:pointer;display:block;" data-bs-toggle="modal" data-bs-target="#orderSettingsModal">
        <div class="icon" style="font-size:32px;color:#00AAB0;margin-bottom:12px;width:70px;height:70px;line-height:70px;border-radius:50%;background-color:#e6f6f7;display:inline-block;">
          <i class="fa-solid fa-concierge-bell"></i>
        </div>
        <h5 style="font-weight:700;margin-bottom:6px;color:#004B59;">إعدادات الطلبات</h5>
        <p style="font-size:14px;color:#6c757d;margin:0;">تفعيل أنواع الطلبات (استلام، محلي، توصيل)</p>
      </a>

      <a class="setting-card" style="text-decoration:none;background:#fff;border-radius:16px;padding:24px;text-align:center;border:1px solid #e9ecef;box-shadow:0 4px 15px rgba(0,0,0,0.05);cursor:pointer;display:block;" data-bs-toggle="modal" data-bs-target="#accountModal">
        <div class="icon" style="font-size:32px;color:#00AAB0;margin-bottom:12px;width:70px;height:70px;line-height:70px;border-radius:50%;background-color:#e6f6f7;display:inline-block;">
          <i class="fa-solid fa-user-cog"></i>
        </div>
        <h5 style="font-weight:700;margin-bottom:6px;color:#004B59;">إدارة الحساب</h5>
        <p style="font-size:14px;color:#6c757d;margin:0;">تغيير كلمة المرور والبيانات الشخصية</p>
      </a>

      <a class="setting-card" style="text-decoration:none;background:#fff;border-radius:16px;padding:24px;text-align:center;border:1px solid #e9ecef;box-shadow:0 4px 15px rgba(0,0,0,0.05);cursor:pointer;display:block;" data-bs-toggle="modal" data-bs-target="#subscriptionModal">
        <div class="icon" style="font-size:32px;color:#00AAB0;margin-bottom:12px;width:70px;height:70px;line-height:70px;border-radius:50%;background-color:#e6f6f7;display:inline-block;">
          <i class="fa-solid fa-gem"></i>
        </div>
        <h5 style="font-weight:700;margin-bottom:6px;color:#004B59;">الاشتراك والباقة</h5>
        <p style="font-size:14px;color:#6c757d;margin:0;">عرض تفاصيل الباقة الحالية وإدارتها</p>
      </a>

    </div>
  </div>

  <!-- Modals -->
  <div class="modal fade" id="restaurantInfoModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">معلومات المطعم</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3"><label class="form-label">اسم المطعم</label><input type="text" class="form-control" value="{{ request.user.restaurants.name|default:'' }}"></div>
          <div class="mb-3"><label class="form-label">وصف المطعم</label><textarea class="form-control" rows="3">{{ request.user.restaurants.description|default:'' }}</textarea></div>
          <div class="mb-3"><label class="form-label">شعار المطعم</label><input type="file" class="form-control"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إغلاق</button>
          <button type="button" class="btn btn-primary" style="background-color:#00AAB0;border:none;">حفظ</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="paymentModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">إعدادات الدفع</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3"><label class="form-label">الاسم</label><input type="text" class="form-control"></div>
          <div class="mb-3"><label class="form-label">البنك</label><input type="text" class="form-control"></div>
          <div class="mb-3"><label class="form-label">الايبان</label><input type="text" class="form-control"></div>
          <div class="form-check form-switch">سيتم تحويل المبالغ لهذا الحساب</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إغلاق</button>
          <button type="button" class="btn btn-primary" style="background-color:#00AAB0;border:none;">حفظ</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="orderSettingsModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">إعدادات الطلبات</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p>حدد أنواع الطلبات التي ترغب في تفعيلها في مطعمك:</p>
          <div class="form-check form-switch fs-5 mb-2"><input class="form-check-input" type="checkbox" checked><label class="form-check-label">تفعيل طلبات الاستلام (Pickup)</label></div>
          <div class="form-check form-switch fs-5 mb-2"><input class="form-check-input" type="checkbox" checked><label class="form-check-label">تفعيل الطلبات المحلية (Dine-in)</label></div>
          <div class="form-check form-switch fs-5 mb-2"><input class="form-check-input" type="checkbox" checked><label class="form-check-label">تفعيل طلبات التوصيل (Delivery)</label></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إغلاق</button>
          <button type="button" class="btn btn-primary" style="background-color:#00AAB0;border:none;">حفظ</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="accountModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">إدارة الحساب</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3"><label class="form-label">البريد الإلكتروني</label><input type="email" class="form-control" value="{{ request.user.email }}"></div>
          <div class="mb-3"><label class="form-label">كلمة المرور</label><input type="password" class="form-control" placeholder="••••••••"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إغلاق</button>
          <button type="button" class="btn btn-primary" style="background-color:#00AAB0;border:none;">حفظ</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="subscriptionModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">الاشتراك والباقة</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p class="mb-1">الباقة الحالية:</p>
          <p class="fw-bold">{{ request.user.restaurants.subscription_plan.name|default:'-' }}</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إغلاق</button>
          <button type="button" class="btn btn-primary" style="background-color:#00AAB0;border:none;">ترقية الباقة</button>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock dashboard_content %}


